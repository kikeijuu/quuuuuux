# Remnant colors when!?
# Ventra: Venture Reality Assessment, Remnant Intelligence and long term planning
# NUE Horizons: Novel/Understood/Enemy Horizons, Ventra Threat Assessment wing with three units, integrated with Seekers

# todo: rework to make this concept actually work
# todo: lock behind new mission chain (and new outfit?)
# todo: add variants targeting other factions

# main job (start and end)
mission "quxNueHorizonsIntelRepublic0"
	job
	repeat
	name "Intel gathering: Republic"
#	description "Travel to <stopovers> in Ancestral space to gather data on a person of interest to the Remnant, using your reputation to meet them in person. As they are a potential threat, your memories of your mission and of the Remnant will be supressed, and you will have to return to <destination> to have them restored. This mission cannot be aborted."
	description "Travel to a specific planet in Ancestral space to accept a Solar Winds Logistics job, in order to gather data on a person of interest to the Remnant. A complex mission, aborting it may have unforseen consequences."
	# invisible prevents dialogue, moved to chained missionunneeded
#   invisible
	source
		government "Remnant"
	to offer
        # todo: has new mission, has fw campaign end if dependency not part of new mission
		has "Remnant: Expanded Horizons Astral 2: done"
		random < 42
		not "quxNueHorizonsIntelRepublic0: offered"
	on offer
        # todo: replace lab with new outfit, if it is needed
#		require "Research Laboratory"
    on accept
		"quxNueHorizonsRendezvousAncestRoll" = "roll: 1"
		set "quxNueHorizonsIntelSignal0"
		conversation "quxNueHorizonsIntelConversation0"
		dialog "${quxNueHorizonsIntelAccept}"
	# stopover deprecated
#	stopover
#		government "Free Worlds" "Republic" "Syndicate" "Neutral" "Independent"
#		attributes "spaceport"
	on abort
		clear "quxNueHorizonsIntelRepublic0: offered"
		clear "quxNueHorizonsIntelSignal0"
	on decline
		clear "quxNueHorizonsIntelRepublic0: offered"
		clear "quxNueHorizonsIntelSignal0"
	on fail
		clear "quxNueHorizonsIntelRepublic0: offered"
		clear "quxNueHorizonsIntelSignal0"
	# completion has to tie in with the chained mission
	to complete
		has "quxNueHorizonsIntelRepublicCompReq0"
	on complete
		clear "quxNueHorizonsIntelRepublic0: offered"
		clear "quxNueHorizonsIntelRepublicCompReq0"
		payment 700000
		"reputation: Remnant" ++
        # todo: replace placeholder
		dialog "When you land, a Ventra operative quickly retrieves the data crystals with the information about the person of interest and hands you the logistics allotment of <payment>."
#       dialog "${quxNueHorizonsIntelCompleteHuman}"

conversation "quxNueHorizonsIntelConversation0"
	label "start"
	scene "scene/thomasmarchand0.jpg"
	`${quxNueHorizonsIntelAcceptHuman0}`
	`	${quxNueHorizonsIntelAcceptHuman1}`
	`	${quxNueHorizonsIntelAcceptHuman2}`
	`	${quxNueHorizonsIntelAcceptHuman3}`
	`	${quxNueHorizonsIntelAcceptHuman4}`
	choice
	`   (Follow the handler and accept the job)`
		goto "selectRendezvous"
	`   (Return to the spaceport with the perfect)`
		decline

	label "selectRendezvous"
	scene "scene/santesson89_0.jpg"

	# human space 0-100
	branch "Earth"
		"quxNueHorizonsRendezvousAncestRoll" == 0

	# branch selection failure fallback
	`(Something has gone horribly wrong with this mission. Please contact Octogiraffe)`
	decline

	# branch outputs
	label "Earth"
	`${quxNueHorizonsIntelAcceptHuman5}`
	`	It looks like your destination is Earth, birthplace of Humanity.`
	`	${quxNueHorizonsIntelAcceptHuman6}`
	accept

phrase "quxNueHorizonsIntelAccept"
	word
		"This mission is too sensitive to risk having your records scanned, so you opt to keep your first destination on a small slip of paper, divorced from your ship's mapping computer."

phrase "quxNueHorizonsIntelAcceptHuman0"
	word
		"The spaceport's perfect summons you through comms to the local Ventra office. The facility is built into the side of a mountain, and is noticeably older than the docks below. The perfect explains that the structure has been use by Ventra for more than a century, its equipment, floors, and defensive turrets being renovated yearly to meet the standards of Remnant efficiency. The walls, however, are the same stone they have always been."

phrase "quxNueHorizonsIntelAcceptHuman1"
	word
		"In a hall outside this Ventra installation's NUE Horizons office, you get debriefed by a Remnant youth the perfect introduces to you as a Ventra handler. Together, they explain your mission."

phrase "quxNueHorizonsIntelAcceptHuman2"
	word
		"You are to head to a planet in Ancestral space, where a Seeker in orbit has hacked into the local port authority job board. You will have to navigate to this planet independently, but depending on where NUE Horizon's Seekers are currently stationed, you can choose which to land at. Once you do so, the Seeker in orbit will insert a job under an affiliate corporation of Solar Winds Logistics into the board, which will you give you the pretext you need to meet with the target."

phrase "quxNueHorizonsIntelAcceptHuman3"
	word
		"The target is a person of interest in Ancestral space, whose decisions and allegiences could threaten Remnant interests in the future. The Ventra handler signs that this is unlikely, but that their division would like you to take procedures not to be caught with any evidence that you knew about the job in advance."

phrase "quxNueHorizonsIntelAcceptHuman4"
	word
		"Stepping towards the door to the NUE Horizons division, the Ventra handler signs for you to follow, as the perfect prepares to leave behind you."

phrase "quxNueHorizonsIntelAcceptHuman5"
	word
		"The NUE Horizons office is newer than much of the Remnant structure you are in. Around you, Ventra handlers assigned to this division work, store, and retrieve data crystals seemingly at random. Leading you to one of the shelves, the young handler leading you takes out a data crystal and slots it into a nearby screen."

phrase "quxNueHorizonsIntelAcceptHuman6"
	word
		"Adjusting the display, the handler zooms out from the projection of your destination. A Remnant ship and its orbit appear, and the Remnant explains that the Seeker will remain, cloaked and waiting, until you reach the spaceport. They will handle the insertion of your cover story into the job board. Dismissing you, the Ventra handler recommends that you protect this information in some way, to make it more effective."

		# long, v0
#		"The spaceport's perfect summons you through comms to the local Ventra office. There, at the bottom of a natural cave almost as deep as the Remnant's vaults, you get debriefed by the perfect and their Ventra aid. After explaining your cover story - soon to be your new reality - and your pretext of being hired by Solar Winds Logistics to meet your target, another Remnant leads you into a dark, earthy chamber. The last thing you see is the flash of a tuning rifle, shifting the weft of some of your gray matter, and the memories within."
		# concise, v0
#		"The spaceport's perfect summons you  to the local Ventra office. There, at the bottom of an hidden cave almost as deep as the Remnant's vaults, you get debriefed. After explaining your cover story and your pretext of being hired by Solar Winds Logistics to meet your target, a Remnant leads you into a dark, earthy chamber. The last thing you see is the flash of a tuning rifle, shifting the weft of some of your gray matter, and the memories within."
		# old, v1
#		"The spaceport's perfect summons you through comms to the local Ventra office. There, at the bottom of a natural cave almost as deep as the Remnant's vaults, you get debriefed by the perfect and their Ventra aid. Together, they explain your cover story and your pretext of being hired by Solar Winds Logistics to meet your target: you are to land on <stopovers>, travel to another destination to meet the target, and then return to <destination>."

# invisible jobs for Seeker ship positioning and conditionals
mission "quxNueHorizonsIntelDaemon0earth"
	repeat
	invisible
	entering
	"offer precedence" 100
	to offer
		not "quxNueHorizonsIntelDaemon0earth: offered"
		has "quxNueHorizonsIntelSignal0"
		"quxNueHorizonsRendezvousAncestRoll" == 0
	destination "Earth"
	on complete
		clear "quxNueHorizonsIntelDaemon0earth: offered"
		clear "quxNueHorizonsIntelSignal0"
		set "quxNueHorizonsIntelRepublicSignal0"
	npc
		government "Remnant"
		personality forbearing vindictive merciful secretive staying waiting uninterested quiet
		system destination
		fleet "quxRemnantSeeker0"

fleet "quxRemnantSeeker0"
	government "Remnant"
	names "remnant"
	cargo 2
	commodities "Food" "Clothing" "Medical"
	outfitters "Korath Exiles Remnant Donations" "Ka'het"
	personality
		disables appeasing secretive
	variant 8
		"Starling"
	variant 6
		"Starling (Heavy)"
	variant 5
		"Starling (Sniper)"
	variant 4
		"Starling (Hunter)"
	variant 3
		"Starling (Thrasher)"
	variant 2
		"Gull"
	variant 2
		"Gull (Sniper)"
	variant 2
		"Gull (Support)"
	variant 1
		"Gull (Cargo)"
	variant 1
		"Gull (Bunks)"
	variant 2
		"Peregrine"

# cover story jobs
mission "quxNueHorizonsIntelRepublicCover0"
	name "Company representation on <destination>"
	description "${quxRemnantShellCompany} - an affiliate of Solar Winds Logistics Ltd. - is looking for a reputable consultant to represent their interests on <destination>, where they have arranged a meeting with ${quxRepublicSpaceTitle} <npc>."
	color selected "quxRemnantCoverJob: selected"
	color unselected "quxRemnantCoverJob: unselected"
	repeat
	job
	# precedence should not be needed
#	"offer precedence" 100
	destination
		government "Republic"
		not attributes "uninhabited"
	to offer
		not "quxNueHorizonsIntelRepublicCover0: offered"
		has "quxNueHorizonsIntelRepublicSignal0"
	on accept
		dialog "This looks like the cover story you need to approach <npc> on <destination>. You accept the job, and send an encrypted signal to the Seeker in orbit. Once on your ship, you receive their blessings in an encoded burst to your license as they leave the system."
	on abort
		clear "quxNueHorizonsIntelRepublicCover0: offered"
		clear "quxNueHorizonsIntelRepublicSignal0"
	on decline
		clear "quxNueHorizonsIntelRepublicCover0: offered"
		clear "quxNueHorizonsIntelRepublicSignal0"
	on fail
		clear "quxNueHorizonsIntelRepublicCover0: offered"
		clear "quxNueHorizonsIntelRepublicSignal0"
	on complete
		clear "quxNueHorizonsIntelRepublicCover0: offered"
		clear "quxNueHorizonsIntelRepublicSignal0"
		set "quxNueHorizonsIntelRepublicCompReq0"
	npc
		government "quxPMC0"
		personality hunting unconstrained opportunistic surveillance staying quiet
		system "Terminus"
		fleet "Hired Guns"

# cover story colors (Remnant)
color "quxRemnantCoverJob: selected" .89 .38 .62 0.
color "quxRemnantCoverJob: unselected" .64 .64 .64 0.